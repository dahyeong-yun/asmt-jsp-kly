-- CREATE TABLE
CREATE TABLE MEMBER(
	MEMBER_ID NVARCHAR2(50) NOT NULL,
	MEMBER_PW NVARCHAR2(50) NOT NULL,
	MEMBER_TEMPPASS NVARCHAR2(50),
	MEMBER_SETTEMP NUMBER,
	MEMBER_EMAIL NVARCHAR2(50) NOT NULL,
	MEMBER_CHECKED NUMBER DEFAULT 0,
	MEMBER_DATE DATE NOT NULL,
	MEMBER_SUSPENDED DATE, 
	PRIMARY KEY(MEMBER_ID)
);
/*
ALTER TABLE MEMBER
MODIFY(MEMBER_TEMPPASS NVARCHAR2(50));

ALTER TABLE MEMBER
ADD(MEMBER_SETTEMP NUMBER DEFAULT 0);
*/

CREATE TABLE BOARD(
	MEMBER_ID NVARCHAR2(50) NOT NULL,
	BOARD_NUM NUMBER NOT NULL,
	BOARD_SUBJECT NVARCHAR2(100) NOT NULL,
	BOARD_DATE DATE NOT NULL,
	BOARD_FILE NVARCHAR2(200),
	BOARD_URL NVARCHAR2(200),
	BOARD_READCOUNT NUMBER DEFAULT 0,
	BOARD_LIKECOUNT NUMBER DEFAULT 0,
	BOARD_REPORTCOUNT NUMBER DEFAULT 0, -- 신고테이블에 신고 카운트 제거 하고 보드테이블에 추가
	BOARD_TAG NVARCHAR2(50),
	BOARD_CATEGORY NVARCHAR2(50) NOT NULL,
	BOARD_BLIND NUMBER DEFAULT 0, -- what for this
	BOARD_YOUTUBE_ID NVARCHAR2(20),
	PRIMARY KEY(BOARD_NUM),
	CONSTRAINT FK_BOARD FOREIGN KEY(MEMBER_ID)
	REFERENCES MEMBER(MEMBER_ID) ON DELETE CASCADE
);

CREATE TABLE BOARD_COMMENT (
	BOARD_NUM NUMBER NOT NULL,
	MEMBER_ID NVARCHAR2(50) NOT NULL,
	COMMENT_NUM NUMBER NOT NULL,
	COMMENT_CON NVARCHAR2(1024) NOT NULL,
	COMMENT_DATE DATE NOT NULL,
	COMMENT_BLIND NUMBER DEFAULT 0,
	PRIMARY KEY(COMMENT_NUM),
	CONSTRAINT FK_COMMENT_MEMBER FOREIGN KEY(MEMBER_ID)
	REFERENCES MEMBER(MEMBER_ID) ON DELETE CASCADE,
	CONSTRAINT FK_COMMENT_ARTICLE FOREIGN KEY(BOARD_NUM)
	REFERENCES BOARD(BOARD_NUM) ON DELETE CASCADE
);

CREATE TABLE LIKED(
	LIKE_NUM NUMBER NOT NULL,
	MEMBER_ID NVARCHAR2(50) NOT NULL,
	BOARD_NUM NUMBER NOT NULL,
	-- 특정 게시물에 대한 전체 좋아요 갯수
	PRIMARY KEY(LIKE_NUM),
	CONSTRAINT FK_LIKE_MEMBER FOREIGN KEY(MEMBER_ID)
	REFERENCES MEMBER(MEMBER_ID) ON DELETE CASCADE,
	CONSTRAINT FK_LIKE_ARTICLE FOREIGN KEY(BOARD_NUM)
	REFERENCES BOARD(BOARD_NUM) ON DELETE CASCADE
);

CREATE TABLE REPORT(
	MEMBER_ID NVARCHAR2(50) NOT NULL,
	BOARD_NUM NUMBER NOT NULL,
	REPORT_NUM NUMBER NOT NULL,
	REPORT_COUNT NUMBER DEFAULT 0,
	REPORT_DATE DATE,
	PRIMARY KEY(REPORT_NUM),
	CONSTRAINT FK_REPORT_MEMBER FOREIGN KEY(MEMBER_ID)
	REFERENCES MEMBER(MEMBER_ID) ON DELETE CASCADE,
	CONSTRAINT FK_REPORT_ARTICLE FOREIGN KEY(BOARD_NUM)
	REFERENCES BOARD(BOARD_NUM) ON DELETE CASCADE
);

-- Dummy Data MEMBER
INSERT INTO MEMBER VALUES('123','123',null,0,'gryb809@naver.com',0,Sysdate,Sysdate);
INSERT INTO MEMBER VALUES('test','123',null,0,'test@naver.com',0,Sysdate,Sysdate);
INSERT INTO MEMBER VALUES('qwe','123',null,0,'gryb809@naver.com',1,sysdate,Sysdate);
INSERT INTO MEMBER VALUES('admin','123',null,0,'gryb809@naver.com',1,sysdate,Sysdate);
INSERT INTO MEMBER VALUES('tempId','123',null,0,'gryb809@naver.com',1,sysdate,Sysdate);
INSERT INTO MEMBER VALUES('dmtja','1234',null,0,'dwqwe2@gmail.com',0,sysdate,Sysdate);
INSERT INTO MEMBER VALUES('bas','1234',null,0,'dwqwe2@gmail.com',0,sysdate,Sysdate);
INSERT INTO MEMBER VALUES('qwer','1234',null,0,'Jony123@gmail.com',0,sysdate,Sysdate);
INSERT INTO MEMBER VALUES('rydvr12','1234',null,0,'dfdsfw@gmail.com',0,sysdate,Sysdate);
INSERT INTO MEMBER VALUES('abcdefg','1234',null,0,'whdwrkdgu@daum.net',0,sysdate,Sysdate);
INSERT INTO MEMBER VALUES('koxk','1234',null,0,'koxk@naver.com',1,sysdate,Sysdate);


-- Dummy Data BOARD
INSERT INTO BOARD VALUES('test',1,'ㅇㅅ 페이커',Sysdate,null,'https://youtu.be/zjwqIyoWV8c',9,20,0,'#롤 #페이커 #lol','게임',0,'zjwqIyoWV8c');
INSERT INTO BOARD VALUES('koxk',2,'번트킹',Sysdate,null,'https://youtu.be/xaR62n0byLw',2,30,0,'#야구 #번트','스포츠',0,'xaR62n0byLw');

-- Dummy Data COMMENT
INSERT INTO BOARD_COMMENT VALUES(1,'test',1,'추천 누르고 갑니다',SYSDATE,0);
INSERT INTO BOARD_COMMENT VALUES(1,'koxk',2,'재밌네요',SYSDATE,0);
INSERT INTO BOARD_COMMENT VALUES(1,'admin',3,'ㅋㅋㅋㅋㅋㅋㅋㅋ',SYSDATE,0);
INSERT INTO BOARD_COMMENT VALUES(2,'bas',4,'이걸 이렇게???',SYSDATE,0);
INSERT INTO BOARD_COMMENT VALUES(2,'qwer',5,'뭐지..',SYSDATE,0);
INSERT INTO BOARD_COMMENT VALUES(1,'tempId',6, 'asd',SYSDATE,6);
INSERT INTO BOARD_COMMENT VALUES(1,'tempId',7,'Asdasss',SYSDATE,5);
INSERT INTO BOARD_COMMENT VALUES(1,'tempId',8,'ASdasdsadkj',SYSDATE,4);
INSERT INTO BOARD_COMMENT VALUES(1,'qwe',9,'ㅋㅋㅋㅋㅋㅋadkj',SYSDATE,0);
INSERT INTO BOARD_COMMENT VALUES(1,'qwe',10,'get the fuck out a here',SYSDATE,4);
INSERT INTO BOARD_COMMENT VALUES(1,'qwe',11,'반갑습니다',SYSDATE,0);

-- Dummy Data LIKED
INSERT INTO LIKED VALUES(1,'tempId',1);
INSERT INTO LIKED VALUES(2,'tempId',2);
INSERT INTO LIKED VALUES(3,'qwe',1);
INSERT INTO LIKED VALUES(4,'qwe',2);

-- Dummy Data REPORT
INSERT INTO REPORT VALUES('tempId',1,1,1,SYSDATE);
INSERT INTO REPORT VALUES('qwe',1,2,8,SYSDATE);
INSERT INTO REPORT VALUES('123',1,3,5,SYSDATE);

-- QUICK

UPDATE MEMBER SET MEMBER_CHECKED = 1 WHERE MEMBER_ID='123';
SELECT * FROM MEMBER;
SELECT * FROM BOARD;
SELECT * FROM BOARD_COMMENT;
SELECT * FROM LIKED;
SELECT * FROM REPORT;

DESC BOARD_COMMENT;
DESC BOARD;
DESC LIKED;
DESC REPORT;

DROP TABLE MEMBER;
DROP TABLE BOARD;
DROP TABLE BOARD_COMMENT;
DROP TABLE LIKED;
DROP TABLE REPORT;

DELETE FROM MEMBER WHERE MEMBER_ID = '123';

COMMIT;


